---
title: homelab 1日目
date: 2022-09-12T22:25:39-07:00
---
「仕事はオープンソースでコンテナやってます」というわりに Kubernetes よくわかってないのは困るなあと思う機会が増えたので、自宅に実験用 Kubernetes をたてることにした。

まずは、[Beelink](https://www.bee-link.com) の小さいコンピュータを買って、そこに [Proxmox](https://www.proxmox.com/en/) を入れてみた。

自宅 Kubernetes というと Raspberry Pi をよく見かけるけれど、Raspberry Pi は世界的に品薄なので、それなりの速さのコンピュータを仮想的に切り分けて使うことにした。仮想化のない環境が必要になったら、余っている Raspberry Pi 3 とか、古い　MacBook Air をクラスタに参加させるつもり。

### はまったところ

- Beelink の BIOS メニューに入るとか、起動する OS をえらぶとか、なぜかうまくいかないことが多く、キーボードを疑ったりした。こういうときコンパクトキーボードだとちょっと困るので、家に一台くらいフルキーボードがあったほうがいいのかもしれない。
- 結局 Windows のトラブルシューティング的なところから「リムーバブルディスクから起動」的なオプションを選んだ、気がする。うろおぼえ。ちゃんと記録をとっておくべき。
- Proxmox のネットワーク設定は、有線 LAN に固定アドレスをもったホストを足すのが前提になっていて、無線 LAN の SSID 設定とかはない。うちでは DHCP から 192.168.1.10 以降をふることにしているので、このホストには 192.168.1.2 を割り当てた。
- インストール作業をしている部屋 (ディスプレイなどがあり、仕事をする部屋) には有線 LAN がないので、Beelink はインストール後に有線 LAN のある部屋 (寝室) に持っていった。インストール中はインターネットに接続しなくても良いので、これで大丈夫。

### これから

Kubernetes いれるまえに、まだいくつか気に入らないところがある。

- Proxmox のインストール中にはホスト名をあてるところがあって `pve.lab.8-p.info` にしたのだけど、当然この名前では引けないので、なんとかしたい。DNS たてるなら、それはこのホストの外にあるべきな気がするけど、早速 Raspberry Pi かなあ。
- パスワード認証できるかぎりやめる。
